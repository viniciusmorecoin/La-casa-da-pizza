<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>La Casa da Pizza</title>

<link rel="stylesheet" href="style.css">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#8B0000">

<!-- üîî OneSignal Push -->
<script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
<script>
window.OneSignalDeferred = window.OneSignalDeferred || [];
OneSignalDeferred.push(async function(OneSignal) {
  await OneSignal.init({
    appId: "80dce65b-6f44-4b32-adcc-a6e3a6cceb10",
    notifyButton: { enable: true }
  });
});
</script>

</head>
<body>

<div id="splash">
  <img src="logo.png">
</div>

<header class="header">
<img src="logo.png">
<h1>La Casa da Pizza</h1>
</header>

<div class="banner">
üî• Entrega r√°pida ‚Ä¢ 40-60 min
</div>

<div class="categories">
<button class="cat-btn active" onclick="filtrar(event,'todas')">Todas</button>
<button class="cat-btn" onclick="filtrar(event,'salgada')">Salgadas</button>
<button class="cat-btn" onclick="filtrar(event,'doce')">Doces</button>
</div>

<div class="meia-box">
<h2>üçï Pizza Meia a Meia</h2>

<select id="sabor1"></select>
<select id="sabor2"></select>

<select id="borda">
<option value="0">Sem borda</option>
<option value="8">Catupiry + R$ 8</option>
<option value="8">Cheddar + R$ 8</option>
<option value="10">Chocolate + R$ 10</option>
</select>

<button class="add-btn" onclick="addMeia()">Adicionar Meia a Meia</button>
</div>

<div class="grid" id="lista"></div>

<div class="cart-btn" onclick="abrirCarrinho()">
üõí Carrinho <span id="contador">0</span>
</div>

<div class="modal" id="modal">
<div class="modal-content">
<h2>Seu Pedido</h2>
<div id="itens"></div>

<h3>Cupom de Desconto</h3>
<input id="cupomInput" placeholder="Digite seu cupom">
<button class="add-btn" onclick="aplicarCupom()">Aplicar Cupom</button>
<div id="cupomMsg" style="margin-top:8px;font-size:14px;"></div>

<input id="nome" placeholder="Seu nome">
<input id="endereco" placeholder="Rua e n√∫mero">
<input id="bairro" placeholder="Bairro">

<select id="pagamento">
<option>Pix</option>
<option>Dinheiro</option>
<option>Cart√£o</option>
</select>

<button class="add-btn" onclick="finalizar()">Finalizar Pedido</button>
<button onclick="fecharCarrinho()">Fechar</button>
</div>
</div>

<script>

let sabores=[

// üçï SALGADAS

{nome:"Pizza do Professor",cat:"salgada",preco:49.90,img:"professor.jpg",desc:"Molho de tomate, mussarela, carne mo√≠da temperada, bacon crocante e molho barbecue especial."},

{nome:"Pizza da Lisboa",cat:"salgada",preco:49.90,img:"lisboa.jpg",desc:"Molho de tomate, mussarela, bacon crocante e abacaxi selecionado."},

{nome:"Pizza do Berlim",cat:"salgada",preco:49.90,img:"berlim.jpg",desc:"Molho de tomate, mussarela, pepperoni fatiado e or√©gano."},

{nome:"Pizza da T√≥quio",cat:"salgada",preco:49.90,img:"toquio.jpg",desc:"Molho de tomate, mussarela, atum, cebola, tomate, azeitona e or√©gano."},

{nome:"Pizza do Rio",cat:"salgada",preco:49.90,img:"rio.jpg",desc:"Molho de tomate, mussarela, calabresa fatiada, cebola e or√©gano."},

{nome:"Pizza da Nair√≥bi",cat:"salgada",preco:49.90,img:"nairobi.jpg",desc:"Molho de tomate, mussarela, frango desfiado, catupiry e or√©gano."},

{nome:"Pizza do Palermo",cat:"salgada",preco:49.90,img:"palermo.jpg",desc:"Molho de tomate, mussarela, tomate fresco, manjeric√£o e or√©gano."},

{nome:"Pizza do Marselha",cat:"salgada",preco:49.90,img:"marselha.jpg",desc:"Molho de tomate, mussarela, cogumelos, presunto e or√©gano."},

{nome:"Pizza do Denver",cat:"salgada",preco:49.90,img:"denver.jpg",desc:"Molho de tomate, mussarela, calabresa, pimenta calabresa e or√©gano."},

{nome:"Pizza do Oslo",cat:"salgada",preco:49.90,img:"oslo.jpg",desc:"Molho de tomate, mussarela, carne seca desfiada, cebola, catupiry e or√©gano."},

{nome:"Pizza da Estocolmo",cat:"salgada",preco:49.90,img:"estocolmo.jpg",desc:"Molho de tomate, mussarela, presunto, tomate, azeitona e or√©gano."},

{nome:"Pizza do Moscou",cat:"salgada",preco:49.90,img:"moscou.jpg",desc:"Molho de tomate, mussarela, queijo prato, cheddar, catupiry e or√©gano."},

{nome:"Pizza do Bogot√°",cat:"salgada",preco:49.90,img:"bogota.jpg",desc:"Molho de tomate, mussarela, carne mo√≠da, milho e or√©gano."},

// üç´ DOCES

{nome:"Pizza de Confete",cat:"doce",preco:39.90,img:"confete.jpg",desc:"Chocolate ao leite cremoso coberto com confetes coloridos."},

{nome:"Pizza de Banana Nevada",cat:"doce",preco:39.90,img:"banana.jpg",desc:"Banana fatiada, chocolate branco e leite em p√≥ polvilhado."},

{nome:"Pizza de Romeo e Julieta",cat:"doce",preco:39.90,img:"romeo.jpg",desc:"Mussarela derretida com generosa camada de goiabada."},

{nome:"Pizza de Chocolate",cat:"doce",preco:39.90,img:"chocolate.jpg",desc:"Chocolate ao leite cremoso espalhado sobre a massa."},

{nome:"Pizza de Prest√≠gio",cat:"doce",preco:39.90,img:"prestigio.jpg",desc:"Chocolate ao leite com coco ralado especial."}

];

let carrinho=[];
let desconto=0;
let cupomAplicado=null;

function calcularTotal(){
  let total=0;
  carrinho.forEach(p=> total+=p.preco);
  return total;
}

function preencherMeia(){
let options="";
sabores.forEach((s,i)=>{
options+=`<option value="${i}">${s.nome} - R$ ${s.preco.toFixed(2)}</option>`;
});
sabor1.innerHTML=options;
sabor2.innerHTML=options;
}

function render(cat){
let html="";
sabores.filter(s=>cat==="todas"||s.cat===cat).forEach((s,i)=>{
html+=`
<div class="card">
<img src="${s.img}">
<div class="card-content">
<h3>${s.nome}</h3>
<div>${s.desc}</div>
<div class="price">R$ ${s.preco.toFixed(2)}</div>
<button class="add-btn" onclick="add(${i})">Adicionar</button>
</div>
</div>`;
});
lista.innerHTML=html;
}

function filtrar(e,cat){
document.querySelectorAll(".cat-btn").forEach(b=>b.classList.remove("active"));
e.target.classList.add("active");
render(cat);
}

function add(i){
carrinho.push(sabores[i]);
atualizarContador();
}

function addMeia(){
let i1=sabor1.value;
let i2=sabor2.value;
let borda=parseFloat(document.getElementById("borda").value);

if(i1===i2)return alert("Escolha sabores diferentes!");

let s1=sabores[i1];
let s2=sabores[i2];
let preco=Math.max(s1.preco,s2.preco)+borda;

carrinho.push({nome:"Meia a Meia: "+s1.nome+" / "+s2.nome,preco:preco});
atualizarContador();
}

function atualizarContador(){
contador.innerText=carrinho.length;
}

function abrirCarrinho(){
let html="";
let total=calcularTotal();

carrinho.forEach((p,i)=>{
html+=`${p.nome} - R$ ${p.preco.toFixed(2)} 
<button onclick="remover(${i})">X</button><br><br>`;
});

html+=`<strong>Total: R$ ${total.toFixed(2)}</strong>`;
itens.innerHTML=html;
modal.style.display="flex";
}

function remover(i){
carrinho.splice(i,1);
atualizarContador();
abrirCarrinho();
}

function fecharCarrinho(){
modal.style.display="none";
}

function finalizar(){
let msg="üçï Novo Pedido%0A%0A";
carrinho.forEach(p=>{
msg+=p.nome+" - R$ "+p.preco.toFixed(2)+"%0A";
});
window.open("https://wa.me/5561998791411?text="+msg);
}

preencherMeia();
render("todas");

</script>

</body>
</html>
